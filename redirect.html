<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ouverture WedShoots</title>
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: sans-serif;
      text-align: center;
      padding: 1rem;
    }
    .button {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.75rem 1.5rem;
      background: #007bff;
      color: #fff;
      text-decoration: none;
      border-radius: 0.25rem;
    }
  </style>
</head>
<body>
  <div>
    <h1>Chargement de l’album WedShoots…</h1>
    <p>Si l’application est installée, elle va s’ouvrir automatiquement.<br>
       Sinon, vous serez redirigé vers la boutique d’applications.</p>
    <p><a id="manualLink" class="button" href="#">Ouvrir manuellement</a></p>
  </div>

  <script>
    // Ton code d'accès
    const accessCode     = "ES408879c9";

    // Deep link simplifié : wedshoots://ES408879c9
    const deepLinkURL    = `wedshoots://${accessCode}`;

    // URL de secours sur l'App Store (iOS) et Play Store (Android)
    const iosStoreURL    = "https://apps.apple.com/fr/app/wedshoots/id660256196";
    const androidStoreURL= "https://play.google.com/store/apps/details?id=net.bodas.android.wedshoots&hl=fr";

    // Intent Android avec fallback vers le Play Store
    const androidIntent  =
      `intent://${accessCode}` +
      `#Intent;scheme=wedshoots;package=net.bodas.android.wedshoots;` +
      `S.browser_fallback_url=${encodeURIComponent(androidStoreURL)};end`;

    function tryOpenApp() {
      const ua = navigator.userAgent || "";

      if (/Android/i.test(ua)) {
        // Android : lance l'intent://
        window.location = androidIntent;
      }
      else if (/iPhone|iPad|iPod/i.test(ua)) {
        // iOS : via un iframe pour forcer le schéma
        const iframe = document.createElement('iframe');
        iframe.style.display = 'none';
        iframe.src = deepLinkURL;
        document.body.appendChild(iframe);
        // si l'app n'ouvre pas au bout de 2s, on redirige vers l'App Store
        setTimeout(() => {
          window.location = iosStoreURL;
        }, 2000);
      }
      else {
        // Desktop / autre → envoi direct vers l'App Store iOS
        window.location = iosStoreURL;
      }
    }

    // Déclenchement auto au chargement
    window.addEventListener("load", tryOpenApp);

    // Lien manuel si JS ne fonctionne pas
    document.getElementById("manualLink").href =
      (/Android/i.test(navigator.userAgent)) ? androidIntent : deepLinkURL;
  </script>
</body>
</html>
