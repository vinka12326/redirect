<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Ouverture WedShoots</title>
  <style>
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: sans-serif;
      text-align: center;
      padding: 1rem;
    }
    .button {
      display: inline-block;
      margin-top: 1rem;
      padding: 0.75rem 1.5rem;
      background: #007bff;
      color: #fff;
      text-decoration: none;
      border-radius: 0.25rem;
    }
  </style>
</head>
<body>
  <div>
    <h1>Ouverture de votre album WedShoots</h1>
    <p>Si l’application est installée, elle va s’ouvrir automatiquement.<br>
       Sinon, vous serez redirigé vers la boutique d’applications.</p>
    <p><a id="manualLink" class="button" href="#">Ouvrir manuellement</a></p>
  </div>

  <script>
    // Ton code d'accès
    const accessCode     = "ES408879c9";

    // Deep link (chemin plutôt que query pour WedShoots)
    const deepLinkURL     = `wedshoots://album/${accessCode}`;

    // URLs de secours
    const iosStoreURL     = "https://apps.apple.com/fr/app/wedshoots/id660256196";
    const androidStoreURL = "https://play.google.com/store/apps/details?id=net.bodas.android.wedshoots&hl=fr";

    // Intent Android avec fallback vers le Play Store
    const androidIntent =
      `intent://album/${accessCode}` +
      `#Intent;scheme=wedshoots;package=net.bodas.android.wedshoots;` +
      `S.browser_fallback_url=${encodeURIComponent(androidStoreURL)};end`;

    function redirect() {
      const ua = navigator.userAgent || "";

      if (/Android/i.test(ua)) {
        // Android : lance l'intent://
        window.location = androidIntent;
      }
      else if (/iPhone|iPad|iPod/i.test(ua)) {
        // iOS : lance le deep link
        window.location = deepLinkURL;
        // Si l'app n'ouvre pas au bout de 1,5s, on redirige sur l'App Store
        setTimeout(() => {
          window.location = iosStoreURL;
        }, 1500);
      }
      else {
        // Desktop / autres → envoi direct vers l'App Store
        window.location = iosStoreURL;
      }
    }

    // Démarre la redirection automatique dès que la page est chargée
    window.addEventListener("load", redirect);

    // Met à jour le lien manuel en bas de page
    document.getElementById("manualLink").href =
      (/Android/i.test(navigator.userAgent)) ? androidIntent : deepLinkURL;
  </script>
</body>
</html>
